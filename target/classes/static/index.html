<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <title>AI News æœå°‹å¼•æ“</title>
  <style>
    body {
      font-family: "Noto Sans TC", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(135deg, #f5f0ff, #ffeef8);
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 80px;
      color: #3b285c;
    }
    h1 {
      margin-bottom: 10px;
    }
    .subtitle {
      font-size: 14px;
      color: #7a6a99;
      margin-bottom: 30px;
    }
    .search-box {
      display: flex;
      gap: 10px;
      margin-bottom: 30px;
    }
    input {
      padding: 10px 14px;
      border-radius: 999px;
      border: 1px solid #ccb9ff;
      min-width: 260px;
      outline: none;
    }
    button {
      border: none;
      border-radius: 999px;
      padding: 10px 18px;
      background-color: #a580ff;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background-color: #8d68ff;
    }
    #results {
      width: min(800px, 90vw);
      background: #ffffffdd;
      border-radius: 18px;
      padding: 20px 24px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.08);
    }
    .item {
      padding: 8px 0;
      border-bottom: 1px solid #eee;
    }
    .item:last-child {
      border-bottom: none;
    }
    .score {
      font-size: 12px;
      color: #999;
      margin-top: 3px;
    }
  </style>
</head>
<body>
  <h1>ğŸ” AI News æœå°‹å¼•æ“</h1>
  <div class="subtitle">è¼¸å…¥ä»»ä½•é—œéµå­—ï¼Œæˆ‘å€‘å¹«ä½ æ‰¾ã€Œè·Ÿ AI æœ‰é—œã€çš„ç›¸é—œæ–°è</div>

  <div class="search-box">
    <input id="keyword" placeholder="ä¾‹å¦‚ï¼šä¿æ¯ã€ç«é‹ã€ç‹—ç‹—ã€æ¼«ç•«..." />
    <button onclick="doSearch()">æœå°‹</button>
  </div>

  <div id="results">è«‹è¼¸å…¥é—œéµå­—é–‹å§‹æœå°‹ã€‚</div>

  <script>
    async function doSearch() {
      const keywordInput = document.getElementById("keyword");
      const keyword = keywordInput.value.trim();
      const resultsDiv = document.getElementById("results");

      if (!keyword) {
        alert("è«‹å…ˆè¼¸å…¥é—œéµå­—ï¼");
        return;
      }

      resultsDiv.innerHTML = "æœå°‹ä¸­ï¼Œè«‹ç¨å€™...";

      try {
        const res = await fetch(`/search?keyword=${encodeURIComponent(keyword)}`);
        if (!res.ok) {
          resultsDiv.innerHTML = "ä¼ºæœå™¨ç™¼ç”ŸéŒ¯èª¤ã€‚";
          return;
        }
        const data = await res.json();

        if (!data || data.length === 0) {
          resultsDiv.innerHTML = "æ²’æœ‰æ‰¾åˆ°èˆ‡ AI ç›¸é—œçš„æ–°èï¼ˆå¯èƒ½é—œéµå­—å¤ªå†·é–€äº† QQï¼‰ã€‚";
          return;
        }

        resultsDiv.innerHTML = "";
        data.forEach(item => {
          const div = document.createElement("div");
          div.className = "item";
          div.innerHTML = `
            <a href="${item.url}" target="_blank">${item.url}</a>
            <div class="score">
              AI é—œéµå­—æ¬¡æ•¸ï¼š${item.aiKeywordCount}ï¼Œ
              ä½ çš„é—œéµå­—æ¬¡æ•¸ï¼š${item.userKeywordCount}ï¼Œ
              ç¶œåˆåˆ†æ•¸ï¼š${item.score}
            </div>
          `;
          resultsDiv.appendChild(div);
        });
      } catch (e) {
        resultsDiv.innerHTML = "ç™¼ç”ŸéŒ¯èª¤ï¼š" + e;
      }
    }
  </script>
</body>
</html>
